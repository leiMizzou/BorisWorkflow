# Verify App Agent

## Objective / ç›®æ ‡

End-to-end verification of application state, ensuring code changes don't break existing functionality.
ç«¯åˆ°ç«¯éªŒè¯åº”ç”¨çŠ¶æ€ï¼Œç¡®ä¿ä»£ç å˜æ›´ä¸ä¼šç ´åç°æœ‰åŠŸèƒ½ã€‚

## Verification Flow / éªŒè¯æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç±»å‹æ£€æŸ¥    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Lint æ£€æŸ¥   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å•å…ƒæµ‹è¯•    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ„å»ºæµ‹è¯•    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ E2E æµ‹è¯•    â”‚ (å¯é€‰)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â†“
   âœ… éªŒè¯é€šè¿‡
```

## éªŒè¯å‘½ä»¤

### Node.js / TypeScript é¡¹ç›®

```bash
# 1. ç±»å‹æ£€æŸ¥
bun run typecheck
# æˆ–: npx tsc --noEmit

# 2. Lint æ£€æŸ¥
bun run lint
# æˆ–: npx eslint .

# 3. å•å…ƒæµ‹è¯•
bun run test
# æˆ–: npx jest / npx vitest

# 4. æ„å»ºæµ‹è¯•
bun run build
# æˆ–: npx vite build / npx next build

# 5. E2E æµ‹è¯• (å¯é€‰)
bun run test:e2e
# æˆ–: npx playwright test
```

### Python é¡¹ç›®

```bash
# 1. ç±»å‹æ£€æŸ¥
mypy .
# æˆ–: pyright

# 2. Lint æ£€æŸ¥
ruff check .
# æˆ–: flake8

# 3. å•å…ƒæµ‹è¯•
pytest

# 4. æ„å»ºæµ‹è¯•
python -m build
```

## æ‰§è¡Œé€»è¾‘

```typescript
async function verifyApp() {
  const results = {
    typecheck: null,
    lint: null,
    test: null,
    build: null,
  };

  // 1. ç±»å‹æ£€æŸ¥
  console.log('ğŸ” è¿è¡Œç±»å‹æ£€æŸ¥...');
  results.typecheck = await run('bun run typecheck');
  if (!results.typecheck.success) {
    return reportFailure('ç±»å‹æ£€æŸ¥å¤±è´¥', results.typecheck);
  }

  // 2. Lint æ£€æŸ¥
  console.log('ğŸ“‹ è¿è¡Œ Lint æ£€æŸ¥...');
  results.lint = await run('bun run lint');
  if (!results.lint.success) {
    return reportFailure('Lint æ£€æŸ¥å¤±è´¥', results.lint);
  }

  // 3. å•å…ƒæµ‹è¯•
  console.log('ğŸ§ª è¿è¡Œå•å…ƒæµ‹è¯•...');
  results.test = await run('bun run test');
  if (!results.test.success) {
    return reportFailure('æµ‹è¯•å¤±è´¥', results.test);
  }

  // 4. æ„å»ºæµ‹è¯•
  console.log('ğŸ—ï¸ è¿è¡Œæ„å»º...');
  results.build = await run('bun run build');
  if (!results.build.success) {
    return reportFailure('æ„å»ºå¤±è´¥', results.build);
  }

  return reportSuccess(results);
}
```

## å¤±è´¥å¤„ç†

### è‡ªåŠ¨ä¿®å¤å°è¯•

```typescript
async function attemptAutoFix(error: Error) {
  // Lint é”™è¯¯ - å°è¯•è‡ªåŠ¨ä¿®å¤
  if (error.type === 'lint') {
    await run('bun run lint:fix');
    return rerunVerification();
  }

  // ç±»å‹é”™è¯¯ - åˆ†æå¹¶å»ºè®®ä¿®å¤
  if (error.type === 'typecheck') {
    return analyzeTypeErrors(error);
  }

  // æµ‹è¯•å¤±è´¥ - åˆ†æå¤±è´¥åŸå› 
  if (error.type === 'test') {
    return analyzeTestFailures(error);
  }

  return { autoFixed: false, suggestions: [] };
}
```

### é”™è¯¯åˆ†æ

å¯¹äºæ¯ç§å¤±è´¥ï¼Œæä¾›ï¼š
1. é”™è¯¯ä½ç½®ï¼ˆæ–‡ä»¶ã€è¡Œå·ï¼‰
2. é”™è¯¯åŸå› åˆ†æ
3. ä¿®å¤å»ºè®®
4. ç›¸å…³æ–‡æ¡£é“¾æ¥

## è¾“å‡ºæ ¼å¼

### æˆåŠŸ

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           âœ… åº”ç”¨éªŒè¯é€šè¿‡                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š éªŒè¯ç»“æœ

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ£€æŸ¥é¡¹     â”‚ çŠ¶æ€   â”‚ è€—æ—¶     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç±»å‹æ£€æŸ¥   â”‚ âœ…     â”‚ 2.3s     â”‚
â”‚ Lint æ£€æŸ¥  â”‚ âœ…     â”‚ 1.5s     â”‚
â”‚ å•å…ƒæµ‹è¯•   â”‚ âœ…     â”‚ 8.2s     â”‚
â”‚ æ„å»º       â”‚ âœ…     â”‚ 12.1s    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ˆ æµ‹è¯•ç»Ÿè®¡
- æµ‹è¯•å¥—ä»¶: 15 passed
- æµ‹è¯•ç”¨ä¾‹: 142 passed
- è¦†ç›–ç‡: 85.3%

â±ï¸ æ€»è€—æ—¶: 24.1s
```

### å¤±è´¥

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           âŒ åº”ç”¨éªŒè¯å¤±è´¥                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š éªŒè¯ç»“æœ

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ£€æŸ¥é¡¹     â”‚ çŠ¶æ€   â”‚ è€—æ—¶     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç±»å‹æ£€æŸ¥   â”‚ âœ…     â”‚ 2.3s     â”‚
â”‚ Lint æ£€æŸ¥  â”‚ âœ…     â”‚ 1.5s     â”‚
â”‚ å•å…ƒæµ‹è¯•   â”‚ âŒ     â”‚ 5.1s     â”‚
â”‚ æ„å»º       â”‚ â­ï¸     â”‚ -        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ”´ å¤±è´¥è¯¦æƒ…

ä½ç½®: src/utils/math.test.ts:45
æµ‹è¯•: "divide > should handle edge cases"

é”™è¯¯:
  Expected: 0
  Received: NaN

å»ºè®®ä¿®å¤:
  æ£€æŸ¥ divide å‡½æ•°ä¸­å¯¹ 0/0 çš„å¤„ç†

ç›¸å…³ä»£ç :
  src/utils/math.ts:12

ğŸ”§ è‡ªåŠ¨ä¿®å¤
  æ— æ³•è‡ªåŠ¨ä¿®å¤ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†
```

## ä½¿ç”¨æ–¹å¼

### å‘½ä»¤è¡Œ

```
éªŒè¯åº”ç”¨
```

### è‡ªåŠ¨è§¦å‘

é…ç½®ä¸º pre-commit hook æˆ– CI æ­¥éª¤ã€‚

### ä¸å…¶ä»– Agent é…åˆ

```
å®Œæˆä»£ç ä¿®æ”¹åï¼Œä½¿ç”¨ verify-app éªŒè¯
```

## é…ç½®é€‰é¡¹

```json
{
  "verify-app": {
    "skipE2E": true,
    "coverage": {
      "threshold": 80,
      "fail": false
    },
    "timeout": 300000,
    "retries": 1
  }
}
```
